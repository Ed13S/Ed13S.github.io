<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://i.ibb.co/VWVm0Yv/favicon.png" type="image/png">
    <title>EDDIE13S</title>
</head>
<body>
    <div class="container">
        <div class="custom-header reveal">
            <div class="inner-header">
                <a href="index.html" class="home-link">EDDIE13S</a>
                <div class="nav-links">
                    <a href="index.html">About</a>
                    <a href="feedback.html">Feedback</a>
                    <button id="theme-toggle">Mode</button>
                </div>
            </div>
        </div>

        <p id="about-text" class="reveal">My name is Eddie, I am <span id="exact-age">15</span>. I like to program software relating to cyber security. Feel free to check out my projects below additionally at my other website.</p>

        <input type="text" id="post-search" placeholder="Search posts (Type 'admin' for tools)..." class="reveal">

        <div id="admin-panel">
            <h3 style="margin-top:0;">Admin Mode Active</h3>
            <div id="live-preview-area" style="margin-bottom: 20px;">
                <p style="font-size: 0.9rem; margin-bottom: 10px;">Post Preview:</p>
                <div class="post-card" style="opacity: 0.7; border-style: dashed;">
                    <div class="post-date">Current Date</div>
                    <span class="post-title" id="pre-title">New Post Title</span>
                    <div class="post-category" id="pre-cat">Category</div>
                </div>
            </div>
            <input type="text" id="new-title" placeholder="Post Title" oninput="updatePreview()">
            <input type="text" id="new-link" placeholder="Link (URL)">
            <input type="text" id="new-category" placeholder="Category" oninput="updatePreview()">
            <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                <button onclick="addPost()">Add Post Locally</button>
                <button onclick="copyBackupCode()" style="background: #2ecc71; color: white;">Backup for GitHub</button>
                <button onclick="clearLocalStorage()" style="border-color: #e74c3c; color: #e74c3c;">Reset Local</button>
            </div>
        </div>

        <div id="posts-container">
            <div class="post-wrapper reveal"><a href="feedback.html" class="post-card"><div class="post-date">January 11, 2023</div><span class="post-title">Feedback Form</span><div class="post-category">Uncategorized</div></a></div>
            <div class="post-wrapper reveal"><a href="https://github.com/Ed13S" class="post-card"><div class="post-date">January 11, 2023</div><span class="post-title">Check out my profile at GitHub @Ed13S</span><div class="post-category">Information, Profiles</div></a></div>
            <div class="post-wrapper reveal"><a href="feedback.html" class="post-card"><div class="post-date">January 12, 2026</div><span class="post-title">Contact Me Form</span><div class="post-category">Uncategorized</div></a></div>
            <div class="post-wrapper reveal"><a href="https://message-encryptor.onrender.com/" class="post-card"><div class="post-date">January 24, 2023</div><span class="post-title">My favourite project</span><div class="post-category">Programs</div></a></div>
            <div class="post-wrapper reveal"><a href="https://scratch.mit.edu/users/ED13SED13s/" class="post-card"><div class="post-date">January 14, 2023</div><span class="post-title">Scratch profile</span><div class="post-category">Information, Profiles</div></a></div>
            <div class="post-wrapper reveal"><a href="https://replit.com/@Eddie13S" class="post-card"><div class="post-date">January 11, 2023</div><span class="post-title">Replit profile</span><div class="post-category">Information, Profiles</div></a></div>
        </div>
    </div>

    <script>
        // PERSISTENT THEME
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme) document.documentElement.setAttribute('data-theme', currentTheme);

        document.getElementById('theme-toggle').addEventListener('click', () => {
            let theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        });

        // SCROLL REVEAL ANIMATION
        function reveal() {
            var reveals = document.querySelectorAll(".reveal");
            for (var i = 0; i < reveals.length; i++) {
                var windowHeight = window.innerHeight;
                var elementTop = reveals[i].getBoundingClientRect().top;
                if (elementTop < windowHeight - 100) {
                    reveals[i].classList.add("active");
                }
            }
        }
        window.addEventListener("scroll", reveal);

        // AGE LOGIC
        document.getElementById('exact-age').innerText = (new Date().getFullYear() - 2010) - (new Date() < new Date(new Date().getFullYear(), 2, 6) ? 1 : 0);

        // ADMIN
        document.getElementById('post-search').oninput = (e) => {
            const val = e.target.value.toLowerCase();
            document.getElementById('admin-panel').style.display = (val === 'admin') ? 'block' : 'none';
            if (val === 'admin') document.documentElement.setAttribute('data-admin', 'true');
            else document.documentElement.removeAttribute('data-admin');
        };

        function addPost() {
            const post = {
                title: document.getElementById('new-title').value,
                link: document.getElementById('new-link').value,
                cat: document.getElementById('new-category').value,
                date: new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })
            };
            const saved = JSON.parse(localStorage.getItem('my_custom_posts')) || [];
            saved.push(post);
            localStorage.setItem('my_custom_posts', JSON.stringify(saved));
            location.reload();
        }

        function loadSavedPosts() {
            const saved = JSON.parse(localStorage.getItem('my_custom_posts')) || [];
            saved.forEach(p => {
                const html = `<div class="post-wrapper local-post reveal active"><a href="${p.link}" class="post-card"><div class="post-date">${p.date}</div><span class="post-title">${p.title}</span><div class="post-category">${p.cat}</div></a></div>`;
                document.getElementById('posts-container').insertAdjacentHTML('afterbegin', html);
            });
        }

        window.onload = () => { reveal(); loadSavedPosts(); };
    </script>
</body>
</html>
