<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://i.ibb.co/TDWtHtCx/image.png" type="image/png">
    <title>EDDIE13S // SECURE</title>
</head>
<body>
    <div id="firewall-overlay">
        <div class="firewall-content">
            <h1>UNAUTHORIZED ACCESS DETECTED</h1>
            <p>FIREWALL PROTOCOL 0-9 ACTIVATED. YOUR IP HAS BEEN LOGGED.</p>
            <button onclick="deactivateFirewall()" id="firewall-btn">RE-AUTHENTICATE</button>
        </div>
    </div>

    <canvas id="matrix-canvas"></canvas>

    <div id="custom-alert">
        <div class="alert-header">_SYSTEM_NOTIFICATION</div>
        <p id="alert-msg"></p>
        <button onclick="closeAlert()" id="alert-btn">ACKNOWLEDGE</button>
    </div>

    <div class="container">
        <div class="system-dashboard">
            <div class="dash-item">STATUS: <span style="color: #2ecc71;">ENCRYPTED</span></div>
            <div class="dash-item" id="live-clock">00:00:00</div>
            <div class="dash-item" id="user-ip">IP: FETCHING...</div>
            <div class="dash-item" style="color: #f1c40f; border-left: 1px solid var(--border-color); padding-left: 10px;">
                SCANNING: <span id="port-scanner">PORT 80</span>
            </div>
        </div>

        <div class="custom-header">
            <div class="inner-header">
                <a href="index.html" class="home-link glitch" data-text="EDDIE13S">EDDIE13S</a>
                <div class="nav-links">
                    <a href="index.html">About</a>
                    <a href="feedback.html">Feedback</a>
                    <button id="theme-toggle">MODE</button>
                </div>
            </div>
        </div>

        <div class="custom-header">
            <p id="typing-text" style="margin:0; min-height: 1.2rem;"></p>
        </div>

        <input type="text" id="post-search" placeholder="Search all posts...">

        <div id="admin-panel" style="display:none;">
            <h3 style="margin-top:0; color: #ff00c1;">_ADMIN_ACCESS_GRANTED</h3>
            <input type="text" id="new-title" placeholder="Post Title">
            <input type="text" id="new-link" placeholder="Source URL">
            <input type="text" id="new-category" placeholder="Category">
            <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="addPost()">Add Locally</button>
                <button onclick="downloadUpdatedFiles()" style="background: #2ecc71; color: #000; font-weight: bold;">Export Core</button>
                <button onclick="clearLocalStorage()" style="border-color: #f39c12; color: #f39c12;">Reset Local</button>
                <button onclick="selfDestruct()" style="border-color: #ff4757; color: #ff4757;">SELF_DESTRUCT</button>
            </div>
        </div>

        <div id="posts-container">
            <div class="post-wrapper" style="display:block;">
                <a href="https://github.com/Ed13S" class="post-card">
                    <div class="post-date">January 11, 2023</div>
                    <span class="post-title">Check out my profile at GitHub @Ed13S</span>
                    <div class="post-category">Information, Profiles</div>
                </a>
            </div>
        </div>
    </div>

    <button id="backToTop">â¬†</button>

    <script>
        // --- MATRIX ENGINE ---
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const letters = "0101SECUREEDDIE13SHACKER";
        const fontSize = 16;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            const styles = getComputedStyle(document.documentElement);
            const bgColor = styles.getPropertyValue('--bg-color').trim();
            const textColor = styles.getPropertyValue('--text-color').trim();
            ctx.fillStyle = bgColor === "#e0d7ff" ? "rgba(224, 215, 255, 0.15)" : "rgba(13, 2, 17, 0.15)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = textColor;
            ctx.font = fontSize + "px monospace";
            for (let i = 0; i < drops.length; i++) {
                const text = letters.charAt(Math.floor(Math.random() * letters.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 50);

        // --- FIREWALL LOGIC ---
        function activateFirewall() {
            document.getElementById('firewall-overlay').style.display = 'flex';
        }
        function deactivateFirewall() {
            document.getElementById('firewall-overlay').style.display = 'none';
            document.getElementById('post-search').value = '';
            document.querySelectorAll('.post-wrapper').forEach(p => p.style.display = 'block');
        }

        // --- SEARCH & SECURITY TRIGGER ---
        document.getElementById('post-search').oninput = (e) => {
            const val = e.target.value.toLowerCase().trim();
            
            // Security trigger: If they type certain "forbidden" words
            if (val === 'hack' || val === 'root' || val === 'exploit') {
                activateFirewall();
                return;
            }

            const isAdmin = (val === 'admin');
            document.getElementById('admin-panel').style.display = isAdmin ? 'block' : 'none';
            
            document.querySelectorAll('.post-wrapper').forEach(p => {
                const title = p.querySelector('.post-title').innerText.toLowerCase();
                p.style.display = (title.includes(val) || val === "" || isAdmin) ? "block" : "none";
            });
        };

        // --- SYSTEM STATS ---
        fetch('https://api.ipify.org?format=json')
            .then(res => res.json()).then(data => document.getElementById('user-ip').innerText = "IP: " + data.ip)
            .catch(() => document.getElementById('user-ip').innerText = "IP: 127.0.0.1");
        
        setInterval(() => { 
            document.getElementById('live-clock').innerText = new Date().toLocaleTimeString(); 
        }, 1000);

        const ports = [21, 22, 23, 25, 53, 80, 443, 3306];
        let pIdx = 0;
        setInterval(() => {
            document.getElementById('port-scanner').innerText = "PORT " + ports[pIdx] + "... OPEN";
            pIdx = (pIdx + 1) % ports.length;
        }, 1500);

        // --- TYPER ---
        const bioText = "I am Eddie, 15 years old. Specializing in cyber security software and secure programming.";
        let charIdx = 0;
        function typeWriter() {
            if (charIdx < bioText.length) {
                document.getElementById("typing-text").innerHTML += bioText.charAt(charIdx);
                charIdx++; setTimeout(typeWriter, 50);
            }
        }

        // --- ADMIN HELPERS ---
        function addPost() {
            const title = document.getElementById('new-title').value;
            const link = document.getElementById('new-link').value;
            const cat = document.getElementById('new-category').value;
            if(!title || !link) return showAlert("ERR: Inputs Required");
            const post = { title, link, cat, date: new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) };
            const saved = JSON.parse(localStorage.getItem('my_custom_posts')) || [];
            saved.push(post);
            localStorage.setItem('my_custom_posts', JSON.stringify(saved));
            location.reload();
        }

        function downloadUpdatedFiles() {
            let docClone = document.documentElement.cloneNode(true);
            docClone.querySelectorAll('.post-wrapper').forEach(p => p.style.display = "block");
            docClone.querySelectorAll('.admin-selector, #admin-panel, #custom-alert, #firewall-overlay').forEach(el => el.remove());
            docClone.querySelectorAll('.local-post').forEach(el => el.classList.remove('local-post'));
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent("<!DOCTYPE html>\n" + docClone.outerHTML));
            element.setAttribute('download', "index.html");
            element.click();
        }

        function selfDestruct() {
            if (confirm("INITIATE TOTAL SYSTEM WIPE?")) {
                document.body.classList.add('destruct-sequence');
                setTimeout(() => {
                    localStorage.clear();
                    document.body.innerHTML = "<div style='color:#00ff41; font-family:monospace; text-align:center; margin-top:20%;'>[ SYSTEM_WIPED ]</div>";
                    setTimeout(() => { location.reload(); }, 2000);
                }, 3000);
            }
        }

        function showAlert(msg) {
            document.getElementById('alert-msg').innerText = "> " + msg;
            document.getElementById('custom-alert').style.display = 'block';
        }
        function closeAlert() { document.getElementById('custom-alert').style.display = 'none'; }
        
        window.onload = () => {
            typeWriter();
            const saved = JSON.parse(localStorage.getItem('my_custom_posts')) || [];
            const container = document.getElementById('posts-container');
            saved.forEach(p => {
                const html = `
                    <div class="post-wrapper local-post" style="display:block;">
                        <div class="admin-selector"><input type="checkbox" class="post-checkbox" checked></div>
                        <a href="${p.link}" class="post-card">
                            <div class="post-date">${p.date}</div>
                            <span class="post-title">${p.title}</span>
                            <div class="post-category">${p.cat}</div>
                        </a>
                    </div>`;
                container.insertAdjacentHTML('afterbegin', html);
            });
            if (!localStorage.getItem('alerted')) {
                showAlert("SECURITY PROTOCOL ENGAGED.");
                localStorage.setItem('alerted', 'true');
            }
        };

        const currentTheme = localStorage.getItem('theme');
        if (currentTheme) document.documentElement.setAttribute('data-theme', currentTheme);
        document.getElementById('theme-toggle').onclick = () => {
            let theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        };
    </script>
</body>
</html>
